<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <title>Comunidade SaÃºde Mental - Dark Mode + API Fake</title>
    <style>
      :root {
        --bg-light: #faf6f0;
        --text-light: #4a4a4a;
        --header-bg-light: url("https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1050&q=80");
        --header-overlay-light: rgba(40, 62, 53, 0.65);
        --btn-bg-light: #a8d5ba;
        --btn-hover-light: #8bb395;
        --card-bg-light: #eaf0ec;
        --card-shadow-light: rgba(168, 213, 186, 0.5);

        --bg-dark: #121514;
        --text-dark: #d5d9d8;
        --header-bg-dark: url("https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1050&q=80");
        --header-overlay-dark: rgba(10, 20, 15, 0.8);
        --btn-bg-dark: #4a7454;
        --btn-hover-dark: #5f8962;
        --card-bg-dark: #1e2725;
        --card-shadow-dark: rgba(46, 74, 59, 0.8);
      }

      /* Reset */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }
      body {
        font-family: "Georgia", serif;
        background: var(--bg-light);
        color: var(--text-light);
        margin: 0;
        padding: 0;
        line-height: 1.6;
        scroll-behavior: smooth;
        transition: background-color 0.4s ease, color 0.4s ease;
      }
      body.dark {
        background: var(--bg-dark);
        color: var(--text-dark);
      }
      header {
        background: var(--header-bg-light) center center/cover no-repeat;
        padding: 3.5rem 1rem 4rem;
        text-align: center;
        color: #f1f4f3;
        font-weight: 700;
        font-size: 2.4rem;
        letter-spacing: 1.5px;
        box-shadow: inset 0 0 0 1000px var(--header-overlay-light);
        border-bottom-left-radius: 25px;
        border-bottom-right-radius: 25px;
        position: relative;
        transition: box-shadow 0.4s ease;
      }
      body.dark header {
        box-shadow: inset 0 0 0 1000px var(--header-overlay-dark);
      }
      main {
        max-width: 720px;
        margin: 2rem auto 4rem;
        padding: 0 1.2rem;
      }
      h2 {
        color: #345c40;
        font-weight: 700;
        font-size: 1.9rem;
        margin-bottom: 1rem;
        border-bottom: 3px solid #a8d5ba;
        padding-bottom: 0.6rem;
        transition: color 0.4s ease, border-color 0.4s ease;
      }
      body.dark h2 {
        color: #8bcfa5;
        border-color: #5f8962;
      }
      form {
        background: var(--card-bg-light);
        padding: 1.6rem 1.8rem;
        margin-bottom: 3rem;
        border-radius: 20px;
        box-shadow: 0 4px 12px var(--card-shadow-light);
        transition: background-color 0.4s ease, box-shadow 0.4s ease;
      }
      body.dark form {
        background: var(--card-bg-dark);
        box-shadow: 0 4px 12px var(--card-shadow-dark);
      }
      label {
        display: block;
        font-weight: 600;
        margin-bottom: 0.6rem;
        color: #4a6f56;
        transition: color 0.4s ease;
      }
      body.dark label {
        color: #a8d5ba;
      }
      textarea,
      input[type="text"],
      input[type="email"] {
        width: 100%;
        padding: 1rem 1.3rem;
        border: none;
        border-radius: 18px;
        font-size: 1.15rem;
        background: #f6f8f5;
        color: #4a4a4a;
        resize: vertical;
        box-shadow: inset 0 0 7px rgba(122, 166, 139, 0.35);
        transition: background-color 0.3s ease, color 0.3s ease,
          box-shadow 0.3s ease;
        font-family: "Georgia", serif;
      }
      body.dark textarea,
      body.dark input[type="text"],
      body.dark input[type="email"] {
        background: #2a3a30;
        color: #d5d9d8;
        box-shadow: inset 0 0 7px rgba(50, 90, 65, 0.6);
      }
      textarea::placeholder,
      input::placeholder {
        color: #8ba894;
      }
      body.dark textarea::placeholder,
      body.dark input::placeholder {
        color: #7e9d86;
      }
      textarea:focus,
      input:focus {
        background-color: #d7e4d7;
        outline: none;
        box-shadow: 0 0 12px #a8d5ba;
      }
      body.dark textarea:focus,
      body.dark input:focus {
        background-color: #3c5a3e;
        box-shadow: 0 0 14px #5f8962;
      }
      button {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: var(--btn-bg-light);
        border: none;
        color: #2e4a3b;
        padding: 1rem 2.5rem;
        margin-top: 1.5rem;
        border-radius: 20px;
        cursor: pointer;
        font-weight: 700;
        font-size: 1.15rem;
        box-shadow: 0 5px 15px rgba(168, 213, 186, 0.5);
        transition: background-color 0.3s ease, box-shadow 0.3s ease,
          transform 0.2s ease;
        font-family: "Georgia", serif;
        gap: 0.6rem;
        user-select: none;
      }
      button:hover {
        background: var(--btn-hover-light);
        box-shadow: 0 7px 20px rgba(139, 179, 149, 0.6);
        transform: translateY(-3px);
      }
      body.dark button {
        background: var(--btn-bg-dark);
        color: #c3d3bf;
        box-shadow: 0 5px 15px rgba(74, 116, 84, 0.7);
      }
      body.dark button:hover {
        background: var(--btn-hover-dark);
        box-shadow: 0 7px 20px rgba(95, 137, 98, 0.75);
      }
      button svg {
        width: 20px;
        height: 20px;
        stroke: currentColor;
        stroke-width: 2.5;
        stroke-linecap: round;
        stroke-linejoin: round;
        fill: none;
      }
      .relatos-list {
        list-style: none;
        padding: 0;
        margin: 0 0 3rem 0;
      }
      .relato-item {
        background: var(--card-bg-light);
        padding: 1.5rem 2rem;
        border-radius: 24px;
        margin-bottom: 1.6rem;
        font-size: 1.15rem;
        line-height: 1.6;
        box-shadow: 0 0 12px var(--card-shadow-light);
        border-left: 8px solid #a8d5ba;
        color: #3c4a3a;
        position: relative;
        transition: background-color 0.4s ease, box-shadow 0.4s ease,
          color 0.4s ease;
      }
      body.dark .relato-item {
        background: var(--card-bg-dark);
        box-shadow: 0 0 16px var(--card-shadow-dark);
        border-left-color: #5f8962;
        color: #c3d3bf;
      }
      .relato-item::before {
        content: "ðŸ’¬";
        position: absolute;
        left: 12px;
        top: 15px;
        font-size: 1.4rem;
      }
      .conselhos-grid {
        display: grid;
        gap: 1.8rem;
        grid-template-columns: 1fr;
        margin-top: 1rem;
        margin-bottom: 3rem;
      }
      @media (min-width: 480px) {
        .conselhos-grid {
          grid-template-columns: 1fr 1fr;
        }
      }
      .conselho-card {
        background: var(--card-bg-light);
        padding: 1.8rem 2rem;
        border-radius: 22px;
        box-shadow: 0 5px 14px var(--card-shadow-light);
        transition: background-color 0.4s ease, box-shadow 0.4s ease;
        display: flex;
        flex-direction: column;
        gap: 0.7rem;
        font-family: "Georgia", serif;
      }
      body.dark .conselho-card {
        background: var(--card-bg-dark);
        box-shadow: 0 5px 18px var(--card-shadow-dark);
      }
      .conselho-card h3 {
        margin: 0;
        font-size: 1.2rem;
        color: #345c40;
      }
      body.dark .conselho-card h3 {
        color: #8bcfa5;
      }
      .conselho-card p {
        margin: 0;
        color: #556f55;
      }
      body.dark .conselho-card p {
        color: #b7ccaf;
      }

      /* Toast */
      #toast {
        position: fixed;
        bottom: 24px;
        left: 50%;
        transform: translateX(-50%);
        background: #345c40cc;
        color: #eef1ea;
        padding: 1rem 2rem;
        border-radius: 25px;
        font-weight: 700;
        font-family: "Georgia", serif;
        font-size: 1rem;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
        z-index: 1000;
      }
      #toast.show {
        opacity: 1;
        pointer-events: auto;
      }

      /* Dark mode toggle */
      #darkToggle {
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--btn-bg-light);
        border: none;
        padding: 0.7rem 1rem;
        border-radius: 30px;
        font-weight: 700;
        cursor: pointer;
        box-shadow: 0 4px 14px rgba(168, 213, 186, 0.6);
        transition: background-color 0.3s ease, box-shadow 0.3s ease,
          color 0.3s ease;
        font-family: "Georgia", serif;
      }
      #darkToggle:hover {
        background: var(--btn-hover-light);
      }
      body.dark #darkToggle {
        background: var(--btn-bg-dark);
        color: #c3d3bf;
        box-shadow: 0 4px 14px rgba(74, 116, 84, 0.7);
      }
      body.dark #darkToggle:hover {
        background: var(--btn-hover-dark);
      }

      /* Responsive adjustments */
      @media (max-width: 400px) {
        header {
          font-size: 1.8rem;
          padding: 2.8rem 1rem 3.5rem;
        }
        main {
          margin: 1rem auto 2.5rem;
          padding: 0 0.9rem;
        }
        button {
          width: 100%;
          padding: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <button id="darkToggle" aria-label="Alternar modo escuro">
      ðŸŒ™ Dark Mode
    </button>

    <header>Comunidade SaÃºde Mental</header>

    <main>
      <section id="relatos">
        <h2>Compartilhe sua experiÃªncia (anÃ´nimo)</h2>
        <form id="formRelato">
          <label for="relatoTexto">Seu relato</label>
          <textarea
            id="relatoTexto"
            rows="5"
            placeholder="Escreva algo que queira compartilhar..."
            required
            minlength="10"
          ></textarea>
          <button type="submit" aria-label="Enviar relato">
            Enviar
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linejoin="round"
                stroke-linecap="round"
                stroke-width="2"
                d="M5 12h14M12 5l7 7-7 7"
              />
            </svg>
          </button>
        </form>
        <ul
          id="relatosList"
          class="relatos-list"
          aria-live="polite"
          aria-relevant="additions"
        ></ul>
      </section>

      <section id="conselhos">
        <h2>Conselhos Profissionais</h2>
        <div class="conselhos-grid" id="conselhosGrid">
          <!-- Conselhos serÃ£o carregados via JS -->
        </div>
      </section>

      <section id="duvidas">
        <h2>Envie sua dÃºvida para um profissional</h2>
        <form id="formDuvida">
          <label for="emailDuvida">Seu email</label>
          <input
            type="email"
            id="emailDuvida"
            placeholder="exemplo@email.com"
            required
          />
          <label for="textoDuvida">Sua dÃºvida</label>
          <textarea
            id="textoDuvida"
            rows="4"
            placeholder="Escreva sua dÃºvida aqui..."
            required
            minlength="10"
          ></textarea>
          <button type="submit" aria-label="Enviar dÃºvida">
            Enviar
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linejoin="round"
                stroke-linecap="round"
                stroke-width="2"
                d="M5 12h14M12 5l7 7-7 7"
              />
            </svg>
          </button>
        </form>
      </section>
    </main>

    <div id="toast" role="alert" aria-live="assertive" aria-atomic="true"></div>

    <script>
      const relatosKey = "comunidadeRelatos";
      const duvidasKey = "comunidadeDuvidas";
      const darkModeKey = "comunidadeDarkMode";

      // Toast helper
      function showToast(msg) {
        const toast = document.getElementById("toast");
        toast.textContent = msg;
        toast.classList.add("show");
        setTimeout(() => toast.classList.remove("show"), 3500);
      }

      // Dark mode toggle + persistÃªncia
      const darkToggle = document.getElementById("darkToggle");
      function setDarkMode(enabled) {
        if (enabled) {
          document.body.classList.add("dark");
          darkToggle.textContent = "â˜€ï¸ Light Mode";
          localStorage.setItem(darkModeKey, "true");
        } else {
          document.body.classList.remove("dark");
          darkToggle.textContent = "ðŸŒ™ Dark Mode";
          localStorage.setItem(darkModeKey, "false");
        }
      }
      darkToggle.addEventListener("click", () => {
        setDarkMode(!document.body.classList.contains("dark"));
      });
      // Load dark mode setting
      window.addEventListener("load", () => {
        const saved = localStorage.getItem(darkModeKey);
        setDarkMode(saved === "true");
      });

      // API fake com localStorage - relatos
      async function apiGetRelatos() {
        return new Promise((resolve) => {
          setTimeout(() => {
            let relatos = JSON.parse(localStorage.getItem(relatosKey)) || [];
            resolve(relatos);
          }, 300);
        });
      }
      async function apiPostRelato(texto) {
        return new Promise((resolve) => {
          setTimeout(() => {
            let relatos = JSON.parse(localStorage.getItem(relatosKey)) || [];
            relatos.push(texto);
            localStorage.setItem(relatosKey, JSON.stringify(relatos));
            resolve({ success: true });
          }, 300);
        });
      }
      // API fake - dÃºvidas
      async function apiPostDuvida(email, texto) {
        return new Promise((resolve) => {
          setTimeout(() => {
            let duvidas = JSON.parse(localStorage.getItem(duvidasKey)) || [];
            duvidas.push({ email, texto });
            localStorage.setItem(duvidasKey, JSON.stringify(duvidas));
            resolve({ success: true });
          }, 300);
        });
      }

      // Render relatos no DOM (mais recentes em cima)
      async function carregaRelatos() {
        const relatosList = document.getElementById("relatosList");
        relatosList.innerHTML = "";
        let relatos = await apiGetRelatos();
        relatos
          .slice()
          .reverse()
          .forEach((texto) => {
            const li = document.createElement("li");
            li.className = "relato-item";
            li.textContent = texto;
            relatosList.appendChild(li);
          });
      }

      // Form relato submit
      document
        .getElementById("formRelato")
        .addEventListener("submit", async (e) => {
          e.preventDefault();
          const texto = document.getElementById("relatoTexto").value.trim();
          if (texto.length < 10) {
            showToast("Escreva pelo menos 10 caracteres no relato.");
            return;
          }
          await apiPostRelato(texto);
          document.getElementById("relatoTexto").value = "";
          showToast("Relato enviado com sucesso!");
          carregaRelatos();
        });

      // Form dÃºvida submit
      document
        .getElementById("formDuvida")
        .addEventListener("submit", async (e) => {
          e.preventDefault();
          const email = document.getElementById("emailDuvida").value.trim();
          const duvida = document.getElementById("textoDuvida").value.trim();
          if (!email || !duvida) {
            showToast("Preencha todos os campos para enviar a dÃºvida.");
            return;
          }
          if (duvida.length < 10) {
            showToast("Escreva pelo menos 10 caracteres na dÃºvida.");
            return;
          }
          await apiPostDuvida(email, duvida);
          showToast("DÃºvida enviada! Responderemos por email.");
          document.getElementById("emailDuvida").value = "";
          document.getElementById("textoDuvida").value = "";
        });

      // Carrega conselhos profissionais estÃ¡ticos
      const conselhosProfissionais = [
        {
          titulo: "Cuide da respiraÃ§Ã£o",
          texto:
            "Respirar profundamente ajuda a reduzir ansiedade e melhora o foco.",
        },
        {
          titulo: "Busque ajuda especializada",
          texto:
            "Procure psicÃ³logos ou psiquiatras para acompanhamento adequado.",
        },
        {
          titulo: "Mantenha rotina saudÃ¡vel",
          texto:
            "Durma bem, alimente-se bem e pratique exercÃ­cios regularmente.",
        },
        {
          titulo: "Compartilhe sentimentos",
          texto: "Falar sobre o que sente ajuda a aliviar a carga emocional.",
        },
      ];

      function carregaConselhos() {
        const container = document.getElementById("conselhosGrid");
        container.innerHTML = "";
        conselhosProfissionais.forEach((c) => {
          const card = document.createElement("div");
          card.className = "conselho-card";
          card.innerHTML = `<h3>${c.titulo}</h3><p>${c.texto}</p>`;
          container.appendChild(card);
        });
      }

      window.addEventListener("load", () => {
        carregaRelatos();
        carregaConselhos();
      });
    </script>
  </body>
</html>
